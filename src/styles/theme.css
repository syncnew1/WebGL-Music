:root{
  --bg: #121212;
  --surface: #181818;
  --text: #ffffff;
  --text-muted: #b3b3b3;
  --accent: #1db954;
  --border: #2a2a2a;
  --surface-2: #202020;
  --shadow: 0 8px 20px rgba(0,0,0,.35);
  --rpw: 0px;
}
/* unified rounding and transitions */
:root{ --border-radius: 8px; --transition-duration: 300ms; --transition-ease: ease-in-out; --radius: var(--border-radius) }
*{box-sizing:border-box}
html,body,#root{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans"}
a{color:inherit;text-decoration:none}
button{background:transparent;color:inherit;border:none;cursor:pointer}
.app{display:grid;grid-template-columns:auto 1fr;grid-template-rows:72px 1fr;height:100%}
.sidebar{grid-row:1/4;background:linear-gradient(180deg,#161616 0%,#0f0f0f 100%);border-right:1px solid var(--border);padding:20px;position:sticky;top:0;width:var(--lw);transition:width var(--transition-duration) var(--transition-ease), padding var(--transition-duration) var(--transition-ease), border-radius var(--transition-duration) var(--transition-ease);border-top-left-radius: var(--border-radius);border-bottom-left-radius: var(--border-radius)}
.topbar{grid-column:2;background:linear-gradient(180deg,#1a1a1a 0%,#121212 100%);border-bottom:1px solid var(--border);display:flex;align-items:center;gap:12px;padding:0 20px;transition: border-radius var(--transition-duration) var(--transition-ease)}
.topbar{border-radius: calc(var(--border-radius)*0.75) calc(var(--border-radius)*0.75) calc(var(--border-radius)*0.5) calc(var(--border-radius)*0.5)}
.content{grid-column:2;overflow:auto;padding:16px;padding-bottom:120px;transition:padding-right var(--transition-duration) var(--transition-ease);padding-right:var(--rpw)}
.playerbar{position:fixed;left:0;right:0;bottom:0;background:linear-gradient(180deg,rgba(24,24,24,.92) 0%,rgba(18,18,18,.92) 100%);backdrop-filter:saturate(140%) blur(8px);border-top:1px solid var(--border);display:grid;grid-template-columns:260px 1fr 260px;align-items:center;padding:12px 20px;gap:16px;height:88px;z-index:50;box-shadow:var(--shadow);transition: border-radius var(--transition-duration) var(--transition-ease), box-shadow var(--transition-duration) var(--transition-ease)}
.playerbar{border-top-left-radius: calc(var(--border-radius)*0.5);border-top-right-radius: calc(var(--border-radius)*0.5);border-bottom-left-radius: calc(var(--border-radius)*0.75);border-bottom-right-radius: calc(var(--border-radius)*0.75)}
.right-panel{position:fixed;top:72px;right:0;bottom:88px;width:var(--rpw);background:linear-gradient(180deg,#181818 0%,#121212 100%);border-left:1px solid var(--border);box-shadow:var(--shadow);transition:width var(--transition-duration) var(--transition-ease), border-radius var(--transition-duration) var(--transition-ease);overflow:hidden;z-index:40;border-top-right-radius: var(--border-radius);border-bottom-right-radius: var(--border-radius)}
.nav-item{display:flex;align-items:center;gap:12px;padding:10px 12px;border-radius:8px;color:var(--text-muted)}
.app[data-left-open='false'] .nav-item .label{display:none}
.app[data-left-open='false'] .sidebar{padding:12px}
.app[data-left-open='false'] .nav-item{justify-content:center;gap:0}
.nav-item.active,.nav-item:hover{background:#232323;color:var(--text)}
.card-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:18px}
.card{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:12px;display:flex;flex-direction:column;gap:10px;box-shadow:var(--shadow);transition:transform .2s ease,background .2s ease}
.card:hover{background:var(--surface-2);transform:translateY(-3px)}
.progress{height:8px;background:#2a2a2a;border-radius:4px;position:relative}
.progress > div{position:absolute;left:0;top:0;bottom:0;background:var(--accent);border-radius:4px}
.volume{width:100%;height:4px;background:#2a2a2a;border-radius:2px;position:relative}
.volume > div{position:absolute;left:0;top:0;bottom:0;background:#6ee28a;border-radius:2px}
.vc-pop{opacity:0;transform:translateY(8px);transition: opacity var(--transition-duration) var(--transition-ease), transform var(--transition-duration) var(--transition-ease);padding:8px;background:rgba(0,0,0,0.6);border-radius:8px;backdrop-filter:blur(6px)}
.vc-pop.show{opacity:1;transform:translateY(0)}
.visualizer-canvas{width:100%;height:240px;background:#0f0f0f;border:1px solid #1f1f1f;border-radius:12px}
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 12px;border-radius:10px;background:#232323;border:1px solid #2a2a2a;transition:background .2s ease,transform .2s ease}
.btn:hover{background:#2a2a2a;transform:translateY(-1px)}
.btn-circle{width:40px;height:40px;border-radius:999px;background:#2a2a2a;border:1px solid #333;display:inline-flex;align-items:center;justify-content:center}
.btn-circle:hover{background:#333}
.icon{width:20px;height:20px;display:inline-block}
.tooltip{position:absolute;left:50%;transform:translate(-50%,-8px);bottom:100%;background:rgba(0,0,0,0.6);color:var(--text);padding:6px 8px;border-radius:var(--radius);font-size:12px;opacity:0;pointer-events:none;transition: opacity var(--transition-duration) var(--transition-ease)}
.tooltip.show{opacity:1}
.search-input{flex:1;padding:10px 14px;border-radius:var(--radius);border:1px solid var(--border);background:#151515;color:var(--text);transition: background-color var(--transition-duration) var(--transition-ease), border-color var(--transition-duration) var(--transition-ease), box-shadow var(--transition-duration) var(--transition-ease), opacity var(--transition-duration) var(--transition-ease)}
.user-chip{background:#2a2a2a;padding:6px 10px;border-radius:999px;display:flex;align-items:center;gap:8px}
.album-thumb{width:56px;height:56px;border-radius:var(--radius);background:linear-gradient(135deg,#ff4d4f,#fa8c16,#fadb14,#52c41a,#1890ff,#2f54eb,#722ed1);transition: transform var(--transition-duration) var(--transition-ease), box-shadow var(--transition-duration) var(--transition-ease);will-change: transform, box-shadow}
.card-cover{height:140px;border-radius:var(--radius);background:linear-gradient(135deg,#202020,#141414);transition: background-color var(--transition-duration) var(--transition-ease), box-shadow var(--transition-duration) var(--transition-ease), opacity var(--transition-duration) var(--transition-ease)}
.card-play{position:absolute;right:12px;bottom:12px}
::-webkit-scrollbar{width:8px;height:8px}
::-webkit-scrollbar-thumb{background:#2a2a2a;border-radius:8px}
@media (max-width: 900px){
  .app{grid-template-columns:200px 1fr}
  .playerbar{grid-template-columns:200px 1fr 160px}
}
@media (max-width: 640px){
  .app{grid-template-columns:1fr;grid-template-rows:64px 1fr}
  .sidebar{grid-row:auto;grid-column:1;background:var(--surface);display:flex;gap:8px}
  .playerbar{grid-template-columns:1fr;height:88px}
  .right-panel{top:64px}
  :root{ --border-radius: 6px }
}
.insight-dashboard{position:relative;z-index:30}
.insight-dashboard .card{overflow:hidden}
